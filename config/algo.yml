mode: live # live | paper

indices:
  - {
      key: NIFTY,
      segment: IDX_I,
      sid: "13",
      capital_alloc_pct: 0.30,
      max_same_side: 2,
      cooldown_sec: 180,
    }
  - {
      key: BANKNIFTY,
      segment: IDX_I,
      sid: "25",
      capital_alloc_pct: 0.30,
      max_same_side: 2,
      cooldown_sec: 180,
    }
  - {
      key: SENSEX,
      segment: IDX_I,
      sid: "51",
      capital_alloc_pct: 0.30,
      max_same_side: 2,
      cooldown_sec: 180,
    }

risk:
  daily_loss_limit_pct: 0.04
  per_trade_risk_pct: 0.01
  sl_pct: 0.30
  tp_pct: 0.60
  trail_step_pct: 0.10
  breakeven_after_gain: 0.35
  exit_drop_pct: 0.03 # trigger trailing exit after 3% pullback from high-water mark

signals:
  primary_timeframe: "1m"
  confirmation_timeframe: "5m"
  validation_mode: "aggressive" # conservative | balanced | aggressive
  supertrend:
    period: 10
    base_multiplier: 2.0
    training_period: 50
    num_clusters: 3
    performance_alpha: 0.1
    multiplier_candidates: [1.5, 2.0, 2.5, 3.0, 3.5]
  adx:
    min_strength: 18
    confirmation_min_strength: 20
  scaling:
    enabled: true
    max_multiplier: 3
    decay_seconds: 900
  validation_modes:
    conservative:
      adx_min_strength: 25
      adx_confirmation_min_strength: 30
      iv_rank_max: 0.6
      iv_rank_min: 0.15
      theta_risk_cutoff_hour: 14
      theta_risk_cutoff_minute: 0
      require_trend_confirmation: true
      require_iv_rank_check: true
      require_theta_risk_check: true
    balanced:
      adx_min_strength: 18
      adx_confirmation_min_strength: 20
      iv_rank_max: 0.8
      iv_rank_min: 0.1
      theta_risk_cutoff_hour: 14
      theta_risk_cutoff_minute: 30
      require_trend_confirmation: true
      require_iv_rank_check: true
      require_theta_risk_check: true
    aggressive:
      adx_min_strength: 15
      adx_confirmation_min_strength: 18
      iv_rank_max: 0.9
      iv_rank_min: 0.05
      theta_risk_cutoff_hour: 15
      theta_risk_cutoff_minute: 0
      require_trend_confirmation: false
      require_iv_rank_check: true
      require_theta_risk_check: false

option_chain:
  atm_window_pct: 0.1 # Not used - now using fixed strike steps (ATM, ATM±1, ATM±2, ATM±3)
  min_iv: 10 # Minimum implied volatility
  max_iv: 60 # Maximum implied volatility
  min_oi: 50000 # Minimum open interest
  max_spread_pct: 3.0 # Maximum bid-ask spread percentage
